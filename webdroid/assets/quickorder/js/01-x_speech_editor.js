var words=[];var counts=[];var choices=[];var intChoices=0;function oldcalculate(a){for(var b=0;b<a.length;b++){if(array_contains(words,a[b])){counts[a[b]]++;}else{words.push(a[b]);counts.push(1);}}}function dodidi(b,a){alert(a);}function calculate(a){var e="";for(var c=0;c<a.length;c++){var d=false;for(var b=0;b<words.length;b++){if(a[c]==words[b]){d=true;counts[c]=counts[c]+1;e+=a[c]+" ";}}if(!d){words.push(a[c]);counts.push(1);e+="<b>"+a[c]+"</b> ";}d=false;}choices[intChoices]=e;intChoices++;}function array_contains(c,b){for(var a=0;a<c.length;a++){if(c[a]==b){return true;}else{return false;}}}function runCalcs(){var a=document.getElementById("txtSpeech").value;var e=[];var d=a.split("|:|");for(var b=0;b<d.length;b++){e[b]=d[b].split(" ");calculate(e[b]);}mDiv=document.getElementById("dvMain");document.getElementById("dvSpeech").innerHTML=JSON.stringify(words);document.getElementById("dvSpeech").innerHTML=document.getElementById("dvSpeech").innerHTML+"<br>"+JSON.stringify(counts);for(var c=0;c<choices.length;c++){newel=document.createElement("div");newel.className="searchBStoryDiv";newelCD=document.createElement("div");newelCD.contentEditable="true";newelCD.innerHTML=choices[c];newelCD.id="dvSpcEdt"+c;newelBD=document.createElement("div");astrt=JSSHOP.ui.doDefBtn("S","app_dlg.getEpMDcom('125',dvSpcEdt"+c+".innerText)");bstrt=JSSHOP.ui.doDefBtn("C","app_dlg.getEpMDcom('130',dvSpcEdt"+c+".innerText)");newelBD.innerHTML=astrt+bstrt;newel.appendChild(newelCD);newel.appendChild(newelBD);mDiv.appendChild(newel);}}function doAppTest(){try{runCalcs();}catch(a){document.getElementById("dvSpeech").innerHTML=a;}}