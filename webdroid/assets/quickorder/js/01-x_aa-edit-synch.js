var tmpSQBArr=null;var tmpVitemArr=null;tmpSQBArr=[];tmpVitemArr=[];var tmpVindex=0;var tStrTbl="qitem";var tStrTDA="i_dadded";var tmpSTblIdx=0;var tStrTJO=[{"quser":"u_dadded"},{"qco":"c_dadded"},{"qitem":"i_dadded"},{"qcat":"cat_dadded"}];var strNextSynch="n";var tmpArrSynchObj=[];var doIPFnish=function(e,d,f){JSSHOP.logJSdbug("doIPFnish",arguments,tStrTbl+": nada");};var doIPConf=function(d,a,g){JSSHOP.logJSdbug("doIPConf",arguments,tStrTbl+": "+d+": "+a);try{arrDTop=JSON.parse(a);arrDQ=JSON.parse(arrDTop.data);if(d=="remote"){JSSHOP.logJSdbug("doIPConf",arguments,tStrTbl+":fromWhere == remote: will do doQAppComm");doQAppComm(arrDQ.queryString,d,"doIPFnish");}else{JSSHOP.logJSdbug("doIPConf",arguments,tStrTbl+":fromWhere !== remote: will do doQSynchComm");doQSynchComm(getShopDir("local"),arrDQ.queryString,d,"doIPFnish");}}catch(f){JSSHOP.logJSdbug("doIPConf.error",arguments,f);}};var parseImgs=function(g,d,j){var f=null;JSSHOP.logJSdbug("parseImgs",arguments,tStrTbl+" :: response: "+d);try{f=JSON.parse(d);var a=f.length;var h=0;tmpVala="";while(h<a){ts=f[h];tmpVala=ts.i_img;tmpValb=ts.i_img;if((tmpValb.indexOf("lcl-")!=-1)||(tmpValb.indexOf("rem-")!=-1)){tmpVala=tmpValb.substring(4,tmpValb.length);}xdrstr=app.doImgSynch(g,tmpVala,ts._id);document.getElementById("fldChallArray").value=xdrstr;xadrstr=document.getElementById("fldChallArray").value;JSSHOP.logJSdbug("parseImgs",arguments,tStrTbl+":app return string: "+xadrstr);arrToChange=JSON.parse(xadrstr);theId=arrToChange.id;procNuUIAitem(g,"qitem","i_img",theId,tmpVala,"doIPConf");h++;}if(g=="local"){doImgSynch("remote");}}catch(i){JSSHOP.logJSdbug("parseImgs.error",arguments,tStrTbl+":app return error!!: "+xadrstr+i);}};var doImgSynch=function(a){try{tmpDOs=null;tmpDOs={};tmpDOs["ws"]="where i_img like ?";if(a=="local"){JSSHOP.logJSdbug("doImgSynch",arguments,tStrTbl+":fromWhere == local: will do doQAppComm");tmpDOs["wa"]=["lcl-%"];oi=getNuDBFnvp("qitem",5,null,tmpDOs);doQAppComm(oi["rq"],a,"parseImgs");}else{tmpDOs["wa"]=["rem-%"];oi=getNuDBFnvp("qitem",5,null,tmpDOs);JSSHOP.logJSdbug("doImgSynch",arguments,tStrTbl+":fromWhere == remote: will do doQSynchComm");doQSynchComm(getShopDir("local"),oi["rq"],a,"parseImgs");}}catch(b){JSSHOP.logJSdbug("doImgSynch.error",arguments,tStrTbl+" : "+b);}};var doNextSynch=function(d,a,g){try{tmpSTblIdx++;adrstr="noQvalue";if(tmpSTblIdx<tStrTJO.length){JSSHOP.logJSdbug("doNextSynch",arguments,tStrTbl+":tmpSTblIdx < tStrTJO.length: "+tmpSTblIdx+" - tStrTJO.length: "+tStrTJO.length);doSynchItemsQ(d);}else{drstr=app.doWriteFile(JSON.stringify(tmpArrSynchObj));document.getElementById("fldChallArray").value=drstr;adrstr=document.getElementById("fldChallArray").value;JSSHOP.logJSdbug("doNextSynch",arguments,tStrTbl+":tmpSTblIdx > tStrTJO.length: "+tmpSTblIdx+" - tStrTJO.length: "+tStrTJO.length+" adrstr: "+adrstr);doImgSynch("local");}}catch(f){JSSHOP.logJSdbug("doNextSynch.ERROR",arguments,tStrTbl+":tmpSTblIdx > tStrTJO.length: "+tmpSTblIdx+" - tStrTJO.length: "+tStrTJO.length+" adrstr: "+adrstr);}};var fSQLoad=function(f,d,h){try{JSSHOP.logJSdbug("fSQLoad",arguments,"nada");document.getElementById(f).innerHTML=d;}catch(g){JSSHOP.logJSdbug("fSQLoad.ERROR",arguments," : "+g);}};var doILcludate=function(f,g,k){try{hasr="n";fullstr="";var d=JSON.parse(g);var b=d.length;var i=0;var h=0;tstr="";currQcommsArr=null;currQcommsArr=[];while(i<b){ts=d[i];JSSHOP.shared.setFrmVals(tStrTbl,ts,function(){void (0);});tmpDDOeS=null;tmpDDOeS={};tmpDDOeS["knvp"]=JSSHOP.shared.getFrmVals(document[tStrTbl],"noQvalue");oi=getNuDBFnvp(tStrTbl,9,null,tmpDDOeS);doQAppComm(oi["rq"],"dvCoTitle","fSQLoad");i++;tmpArrSynchObj.push(oi["rq"]);if(i==b-1){JSSHOP.logJSdbug("doILcludate",arguments,tStrTbl+":iint == len - 1: "+i+" - len: "+b);doNextSynch("local","b","c");}else{JSSHOP.logJSdbug("doILcludate",arguments,tStrTbl+":iint < len: "+i+" - len: "+b);}i++;}}catch(j){JSSHOP.logJSdbug("doILcludate.ERROR",arguments,tStrTbl+":tmpSTblIdx > tStrTJO.length: "+g);}};var doRemupdate=function(f,g,k){try{hasr="n";fullstr="";var d=null;var d=JSON.parse(g);var b=d.length;var i=0;var h=0;tstr="";currQcommsArr=null;currQcommsArr=[];while(i<b){ts=d[i];JSSHOP.shared.setFrmVals(tStrTbl,ts,function(){void (0);});tmpDDOeS=null;tmpDDOeS={};tmpDDOeS["knvp"]=JSSHOP.shared.getFrmVals(document[tStrTbl],"noQvalue");oi=getNuDBFnvp(tStrTbl,9,null,tmpDDOeS);tmpArrSynchObj.push(oi["rq"]);if(i==b-1){JSSHOP.logJSdbug("doRemupdate",arguments,tStrTbl+":iint == len - 1: "+i+" - len: "+b);doNextSynch("remote","b","c");}else{JSSHOP.logJSdbug("doRemupdate",arguments,tStrTbl+":iint < len: "+i+" - len: "+b);}i++;}}catch(j){alert("doRemupdate.error: "+j);}};var getSyncRemDadded=function(f,d,i){try{tmpDOaaes=null;tmpDOaaes={};appDadded=Math.round(f);tmpCurDadded=123;if(d.indexOf(tStrTDA)!=-1){var h=null;h=JSON.parse(d);ts=h[0];remDadded=Math.round(ts[tStrTDA]);tmpDOaaes["ws"]="where "+tStrTDA+">?";if(appDadded==remDadded){JSSHOP.logJSdbug("getSyncRemDadded",arguments,tStrTbl+":no update needed .. remDadded: "+remDadded+" - appDadded: "+appDadded);doNextSynch("neutral","b","c");}else{if(remDadded>appDadded){tmpDOaaes["wa"]=[appDadded];oi=getNuDBFnvp(tStrTbl,5,null,tmpDOaaes);JSSHOP.logJSdbug("getSyncRemDadded",arguments,tStrTbl+":remDadded > .. remDadded: "+remDadded+" - appDadded: "+appDadded);doQSynchComm(getShopDir("local"),oi["rq"],"dvCoTitle","doILcludate");}else{tmpDOaaes["wa"]=[remDadded];oi=getNuDBFnvp(tStrTbl,5,null,tmpDOaaes);JSSHOP.logJSdbug("getSyncRemDadded",arguments,tStrTbl+":appDadded > .. remDadded: "+remDadded+" - appDadded: "+appDadded);doQAppComm(oi["rq"],"dvCoTitle","doRemupdate");}}}else{tmpDOaaes["wa"]=["12"];oi=getNuDBFnvp(tStrTbl,5,null,tmpDOaaes);JSSHOP.logJSdbug("getSyncRemDadded",arguments,tStrTbl+":tStrTDA error: "+tStrTDA+" .. remDadded: "+remDadded+" - appDadded: "+appDadded);doQAppComm(oi["rq"],"dvCoTitle","doRemupdate");}}catch(g){alert("getSyncRemDadded.error: "+g);}};var getSyncLclDadded=function(f,d,i){JSSHOP.logJSdbug("getSyncLclDadded",arguments,d);try{if(d.indexOf(tStrTDA)!=-1){var h=null;h=JSON.parse(d);ts=h[0];lclDadded=ts[tStrTDA];tmpDOes=null;tmpDOes={};tmpDOes["c"]=[tStrTDA];tmpDOes["l"]="1";tmpDOes["o"]=tStrTDA+" desc";tmpDOes["ws"]="";tmpDOes["wa"]=[];oi=getNuDBFnvp(tStrTbl,5,null,tmpDOes);JSSHOP.logJSdbug("getSyncLclDadded",arguments,"lclDadded: "+lclDadded);doQSynchComm(getShopDir("local"),oi["rq"],lclDadded,"getSyncRemDadded");}else{JSSHOP.logJSdbug("getSyncLclDadded",arguments,tStrTbl+": getSyncLclDadded - no dadded");}}catch(g){alert("getSyncLclDadded:error "+g);}};var doNuSynchItemsQ=function(a,b){try{JSSHOP.logJSdbug("doSynchItemsQ",arguments,a+" : "+b);tStrTbl=a;tStrTDA=b;tmpDOes=null;tmpDOes={};tmpDOes["c"]=[tStrTDA];tmpDOes["l"]="1";tmpDOes["o"]=tStrTDA+" desc";tmpDOes["ws"]="";tmpDOes["wa"]=[];oi=getNuDBFnvp(tStrTbl,5,null,tmpDOes);JSSHOP.logJSdbug("doNuSynchItemsQ",arguments,"nada");doQAppComm(oi["rq"],"dvCoTitle","getSyncLclDadded");}catch(c){alert("doNuSynchItemsQ:error "+c);}};var doSynchItemsQ=function(b){try{kakac=tStrTJO[tmpSTblIdx];for(var a in kakac){JSSHOP.logJSdbug("doSynchItemsQ",arguments,a+" : "+kakac[a]);doNuSynchItemsQ(a,kakac[a]);}}catch(c){alert("doSynchItemsQ:error "+c);}};var dmyFnishCntLoad=fnishCntLoad;fnishCntLoad=function(){return dmyFnishCntLoad;};var aLoadSynch=function(){};